# PopChoice (starter)

## Goal (Step 1)
Embed the sample movies and store them in Supabase.

## Supabase setup
Run this SQL in your Supabase SQL editor:

```sql
create extension if not exists vector;

create table if not exists movies (
  id bigint generated by default as identity primary key,
  title text not null,
  release_year int,
  content text,
  embedding vector(1536)
);
```

## Environment variables for Cloudflare Worker

```
export OPENAI_API_KEY="..."
export SUPABASE_URL="https://your-project.supabase.co"
export SUPABASE_API_KEY="..."
```

### ingest.js 
Check the code in scripts/ingest.js file. You will need to add openAI and supabase client to this file to insert the movies into Supabase. This is a sample code to show you how to insert the movies into Supabase. 

Please run the code locally to avoid your private API keys from being exposed.
